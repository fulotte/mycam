# 变更日志

本文件记录 MyCam 项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [1.0.0] - 2025-01-02

### 新增
- 📹 **实时视频预览** - 局域网低延迟视频流（3 FPS）
- 🎯 **运动检测** - 8x8 网格智能画面变化检测
- ☁️ **云端存储** - 阿里云 OSS 自动存储照片
- 📊 **元数据管理** - Tablestore 存储图片元数据
- 📱 **多端通知** - 支持飞书和钉钉机器人推送
- 🌐 **远程访问** - 通过云服务互联网访问
- 🎨 **Web 界面** - 响应式设计，支持手机和桌面
- ⚙️ **设备管理** - 添加/编辑设备，配置参数
- 📸 **历史照片** - 时间线浏览，筛选查看
- 🔔 **通知配置** - 可视化配置通知规则
- 🔐 **STS 令牌** - 安全的临时 OSS 上传凭证
- 🔍 **mDNS 发现** - 局域网自动发现设备
- 📝 **日志系统** - 结构化日志和错误处理
- 🐕 **看门狗** - 防止系统死锁

### 技术栈
**固件:**
- PlatformIO + ESP32-Arduino 框架
- FreeRTOS 多任务
- ESP32 异步 HTTP 服务器
- RGB565 图像格式（支持像素访问）
- BMP 流媒体格式

**云端:**
- 阿里云函数计算（Node.js）
- 阿里云 OSS（对象存储）
- 阿里云 Tablestore（NoSQL 数据库）
- 阿里云 API 网关
- Terraform 基础设施即代码

**前端:**
- Vue 3 + Vite
- Pinia 状态管理
- Element Plus UI 组件库
- Vue Router
- Axios HTTP 客户端

### 文档
- 产品需求文档 (PRD)
- 部署指南
- API 文档
- 故障排查指南
- 5 个实施计划（M1-M5）

### 安全
- STS 临时凭证（15 分钟有效期）
- 设备路径隔离
- OSS 签名 URL
- RAM 角色权限控制

### 性能
- 固件看门狗 10 秒超时
- 函数计算异步通知触发
- 前端图片懒加载
- OSS 缩略图生成
- Tablestore TTL 自动清理（30 天）

---

## 未来计划

### [1.1.0] - 计划中
- [ ] 支持更多摄像头型号
- [ ] 人脸检测功能
- [ ] 视频录制
- [ ] 移动端原生应用
- [ ] 多用户权限管理
- [ ] 定时任务
- [ ] 云端回放

### [1.2.0] - 计划中
- [ ] 边缘 AI 检测
- [ ] 多设备联动
- [ ] 本地 SD 卡存储
- [ ] 离线模式
- [ ] 数据备份
- [ ] 监控仪表板

---

## 版本说明

### 版本编号规则
- **主版本号**: 不兼容的 API 变更
- **次版本号**: 向下兼容的功能新增
- **修订号**: 向下兼容的问题修复

### 更新类型图标
- 🎉 **新增** - 新功能
- 🐛 **修复** - Bug 修复
- 📝 **文档** - 文档更新
- ♻️ **重构** - 代码重构
- ⚡ **性能** - 性能优化
- 🔒 **安全** - 安全相关
- 🎨 **UI** - 界面改进

---

[1.0.0]: https://github.com/yourusername/mycam/releases/tag/v1.0.0
